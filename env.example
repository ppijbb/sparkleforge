# Local Researcher Project Environment Configuration (v2.0 - 8대 혁신)

# =============================================================================
# CORE LLM CONFIGURATION (Multi-Model Orchestration - 혁신 3)
# =============================================================================
# 기본 제공자 (Google Gemini 2.5 Flash Lite 직결)
# LLM Configuration - Gemini 직결 사용
LLM_PROVIDER=google
LLM_MODEL=google/gemini-2.5-flash-lite
LLM_TEMPERATURE=0.1
LLM_MAX_TOKENS=4000

# OpenRouter 사용 안 함 (비활성화)
# OPENROUTER_API_KEY=

# Google AI Studio 또는 Vertex AI API Key (필수)
GOOGLE_API_KEY=your_google_api_key_here

# Multi-Agent Orchestration - 역할별 Gemini 모델
PLANNING_MODEL=google/gemini-2.5-flash-lite
REASONING_MODEL=google/gemini-2.5-flash-lite
VERIFICATION_MODEL=google/gemini-2.5-flash-lite
GENERATION_MODEL=google/gemini-2.5-flash-lite
COMPRESSION_MODEL=google/gemini-2.5-flash-lite

# Cost optimization - 무료 모델 우선
BUDGET_LIMIT=0.0
ENABLE_COST_OPTIMIZATION=true

# =============================================================================
# ADAPTIVE SUPERVISOR CONFIGURATION
# =============================================================================
AGENT_MAX_RETRIES=3
AGENT_TIMEOUT=300
ENABLE_SELF_PLANNING=true
ENABLE_AGENT_COMMUNICATION=true

# Adaptive Supervisor settings
MAX_CONCURRENT_RESEARCH_UNITS=5
MIN_RESEARCHERS=1
MAX_RESEARCHERS=10
ENABLE_FAST_TRACK=true
ENABLE_AUTO_RETRY=true
PRIORITY_QUEUE_ENABLED=true

# Quality monitoring
ENABLE_QUALITY_MONITORING=true
QUALITY_THRESHOLD=0.7

# =============================================================================
# RESEARCH CONFIGURATION
# =============================================================================
MAX_SOURCES=20
SEARCH_TIMEOUT=30
ENABLE_ACADEMIC_SEARCH=true
ENABLE_WEB_SEARCH=true
ENABLE_BROWSER_AUTOMATION=true

# Streaming Pipeline settings
ENABLE_STREAMING=true
STREAM_CHUNK_SIZE=1024
ENABLE_PROGRESSIVE_REPORTING=true
ENABLE_INCREMENTAL_SAVE=true

# Web Application Settings
STREAMLIT_PORT=8501
STREAMLIT_ADDRESS=0.0.0.0

# Parallel processing
ENABLE_PARALLEL_COMPRESSION=true
ENABLE_PARALLEL_VERIFICATION=true

# =============================================================================
# UNIVERSAL MCP HUB CONFIGURATION
# =============================================================================
MCP_ENABLED=true
MCP_TIMEOUT=30

# Universal MCP Hub settings
ENABLE_PLUGIN_ARCHITECTURE=true
ENABLE_SMART_TOOL_SELECTION=true
ENABLE_AUTO_FALLBACK=false

# MCP Server Connection Settings
# MCP 서버 사용 여부 (true: MCP 서버 사용, false: 직접 API 사용)
USE_MCP_SERVER=false

# G-Search MCP Server Settings (Google Search를 위한 MCP 서버)
G_SEARCH_MCP_SERVER_URL=https://your-gsearch-mcp-server.com
ENABLE_G_SEARCH_MCP=false

# DuckDuckGo MCP Server Settings
DUCKDUCKGO_MCP_SERVER_URL=
ENABLE_DUCKDUCKGO_MCP=true

# =============================================================================
# MCP SERVER API KEYS (환경변수로 관리 - mcp_config.json에서 사용)
# =============================================================================
# 각 MCP 서버별 필요한 API 키를 설정하세요.
# 예시:
# EXA_API_KEY=your_exa_api_key_here
# TAVILY_API_KEY=your_tavily_api_key_here
# 각 서버의 문서를 참고하여 필요한 API 키를 설정하세요.

# MCP Server Names (comma-separated)
MCP_SERVER_NAMES=g-search,tavily,exa,fetch,filesystem,python_coder,code_interpreter,arxiv,scholar,crunchbase,linkedin

# MCP Tool Categories (comma-separated)
MCP_SEARCH_TOOLS=g-search,tavily,exa
MCP_DATA_TOOLS=fetch,filesystem
MCP_CODE_TOOLS=python_coder,code_interpreter
MCP_ACADEMIC_TOOLS=arxiv,scholar
MCP_BUSINESS_TOOLS=crunchbase,linkedin

# =============================================================================
# HIERARCHICAL COMPRESSION CONFIGURATION
# =============================================================================
ENABLE_HIERARCHICAL_COMPRESSION=true
COMPRESSION_LEVELS=3
PRESERVE_IMPORTANT_INFO=true
ENABLE_COMPRESSION_VALIDATION=true
COMPRESSION_HISTORY_ENABLED=true
MIN_COMPRESSION_RATIO=0.05

# =============================================================================
# CONTINUOUS VERIFICATION CONFIGURATION
# =============================================================================
ENABLE_CONTINUOUS_VERIFICATION=true
VERIFICATION_STAGES=3
CONFIDENCE_THRESHOLD=0.6
ENABLE_EARLY_WARNING=true
ENABLE_FACT_CHECK=true
ENABLE_UNCERTAINTY_MARKING=true

# =============================================================================
# ADAPTIVE CONTEXT WINDOW CONFIGURATION
# =============================================================================
ENABLE_ADAPTIVE_CONTEXT=true
MIN_TOKENS=2000
MAX_TOKENS=1000000
IMPORTANCE_BASED_PRESERVATION=true
ENABLE_AUTO_COMPRESSION=true
ENABLE_LONG_TERM_MEMORY=true
MEMORY_REFRESH_INTERVAL=3600

# =============================================================================
# PRODUCTION-GRADE RELIABILITY CONFIGURATION
# =============================================================================
ENABLE_CIRCUIT_BREAKER=true
ENABLE_EXPONENTIAL_BACKOFF=true
ENABLE_STATE_PERSISTENCE=true
ENABLE_HEALTH_CHECK=true
ENABLE_GRACEFUL_DEGRADATION=false
ENABLE_DETAILED_LOGGING=true

# Circuit breaker settings
FAILURE_THRESHOLD=5
RECOVERY_TIMEOUT=60

# State persistence
STATE_BACKEND=redis
STATE_TTL=3600

# =============================================================================
# OUTPUT CONFIGURATION
# =============================================================================
OUTPUT_DIR=output
ENABLE_PDF=true
ENABLE_MARKDOWN=true
ENABLE_JSON=true
ENABLE_DOCX=true
ENABLE_HTML=true
ENABLE_LATEX=false

# =============================================================================
# MEMORY SYSTEM CONFIGURATION (Multi-Agent Orchestration)
# =============================================================================
# Shared Memory System - Multi-agent 간 정보 공유
MEMORI_STORAGE_PATH=./storage/memori
ENABLE_CHROMADB=true

# Multi-Agent Orchestration Settings
ENABLE_AGENT_ORCHESTRATION=true
MAX_PARALLEL_AGENTS=4
ENABLE_SHARED_MEMORY=true

# =============================================================================
# CHROMADB CONFIGURATION
# =============================================================================
# ChromaDB는 벡터 검색을 위해 사용됩니다. 선택사항이지만 권장됩니다.
# ChromaDB가 없으면 벡터 검색 기능이 비활성화되고 파일 스토리지만 사용됩니다.
#
# ChromaDB 설치:
#   pip install chromadb
#
# ChromaDB 자동 초기화 및 디렉토리:
CHROMADB_PERSIST_DIR=./storage/chromadb

# =============================================================================
# PRODUCTION DEPLOYMENT NOTES
# =============================================================================
# 모든 환경 변수는 필수입니다. 기본값이 없으므로 반드시 설정해야 합니다.
# 시스템 시작 시 환경 변수가 누락되면 명확한 에러 메시지와 함께 종료됩니다.
# 
# 필수 API 키:
# - GOOGLE_API_KEY: Google 또는 Vertex API 키
#
# 필수 환경 변수:
# - LLM_MODEL: LLM 모델 식별자 (예: google/gemini-2.5-flash-lite)
# - LLM_PROVIDER: 제공자 이름 (예: google)
# - LLM_TEMPERATURE: 온도 설정 (0.0-1.0)
# - LLM_MAX_TOKENS: 최대 토큰 수
#
# MCP 서버가 실행 중이어야 하며, 필수 도구들이 정상 작동해야 합니다.
# Production 환경에서는 모든 의존성이 설치되고 설정되어야 합니다.
#
# ChromaDB가 없어도 시스템은 정상 작동하지만, 벡터 검색 기능이 비활성화됩니다.
# 벡터 검색을 사용하려면: pip install chromadb

# =============================================================================
# DOCKER CONTAINER CONFIGURATION (Production Deployment)
# =============================================================================
# Docker Compose 서비스 설정
BACKEND_PORT=8000
FRONTEND_PORT=8501
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_SSL=False

# Database Configuration (PostgreSQL)
DATABASE_URL=postgresql://sparkleforge:password@db:5432/sparkleforge
DB_PASSWORD=password

# Docker Networking
BACKEND_URL=http://backend:8000
FRONTEND_URL=http://frontend:8501

# Sandbox Configuration (Optional)
SANDBOX_TIMEOUT=30
SANDBOX_MEMORY_LIMIT=512m
SANDBOX_CPU_LIMIT=0.5

# Container Health Checks
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3

# Docker Compose Profiles
# profiles: ["sandbox"] - 샌드박스 활성화
# profiles: [] - 기본 서비스만 실행

# =============================================================================
# CLI AGENTS CONFIGURATION (Advanced Agent Support)
# =============================================================================
# CLI 기반 에이전트 활성화
ENABLE_CLI_AGENTS=false

# Claude Code (Anthropic)
CLAUDE_CODE_API_KEY=your_claude_code_api_key_here

# OpenCode (Open Source)
OPEN_CODE_MODEL_PATH=/path/to/opencode/model

# Gemini CLI (Google)
GEMINI_CLI_API_KEY=your_gemini_cli_api_key_here
GEMINI_CLI_MODEL=gemini-pro

# Cline CLI (Code Editing)
CLINE_CLI_CONFIG_PATH=/path/to/cline/config.json

# CLI 에이전트 사용 예시:
# python main.py run "Create a Python function" --model claude_code
# python main.py run "Analyze this code" --model gemini_cli --mode analyze
# python main.py run "Refactor this code" --model cline_cli --files main.py
 TARGET_COMPRESSION_RATIO=0.2